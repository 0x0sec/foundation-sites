////
/// @group grid
////

/// Change the behavior of columns defined inside this mixin to use a different column count.
///
/// @param {number} $columns - Number of columns to use.
/// @param {booleam} $root
///   If `false`, selectors inside this mixin will nest inside the parent selector.
///   If `tru`, selectors will not nest.
@mixin grid-context(
  $columns,
  $root: false
) {
  // Store the current column count so it can be re-set later
  $old-grid-column-count: $columns;
  $grid-column-count: $columns !global;
  @if $root {
    @at-root { @content; }
  }
  @else {
    @content;
  }
  // Restore the old column count
  $grid-column-count: $old-grid-column-count !global;
}

/// Creates a grid row.
///
/// @param {keyword|list} $behavior
///   Modifications to the default grid styles. `nest` indicates the row will be placed inside another row. `collapse` indicates that the columns inside this row will not have padding. `nest collapse` combines both behaviors.
/// @param {number} $width - Maximum width of the row.
/// @param {number} $columns - Column count for this row.
@mixin grid-row(
  $columns: null,
  $behavior: null,
  $width: $grid-row-width,
  $cf: true
) {
  $behavior: -zf-get-options($behavior, nest collapse);
  $margin: auto;
  
  @if map-get($behavior, nest) {
    $margin: -$grid-column-gutter;

    @if map-get($behavior, collapse) {
      $margin: 0;
    }
  }
  @else {
    max-width: $width;
  }

  margin: {
    left: $margin;
    right: $margin;
  };
  
  @if $columns != null {
    @include grid-context($columns) {
      @content;
    }
  }

  @if $cf {
    @include clearfix;
  }
}

/// Creates a full-width column with proper gutters. Meant to be a replacement for:
/// ```html
/// <div class="row">
///   <div class="small-12 columns">
///   </div>
/// </div>
///
/// @param {Number} $width [$grid-row-width] - The maximum width of the column.
/// @param {Number} $gutter [$grid-column-gutter] - Padding to add to the left and right side.
@mixin grid-column-row(
  $width: $grid-row-width,
  $gutter: $grid-column-gutter
) {
  max-width: $width;
  margin-left: auto;
  margin-right: auto;
  padding-left: $gutter;
  padding-right: $gutter;
}
