// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

// We use these to control the style of the reveal overlay.
$reveal-overlay-bg: rgba(#000, 0.45) !default;

// We use these to control the style of the modal itself.
$reveal-background: #fff !default;
$reveal-position-top: rem-calc(100) !default;
$reveal-width: 80% !default;
$reveal-max-width: $grid-row-width !default;
$reveal-padding: rem-calc(20) !default;
$reveal-shadow: 0 0 10px rgba(#000, 0.4) !default;

// We use these to control the modal border
$reveal-border-style: solid !default;
$reveal-border-width: 1px !default;
$reveal-border-color: #ccc !default;

$reveal-border: 1px solid #ccc !default;

// Set base z-index
$z-index-base: 1005;

// We use this to create the reveal background overlay styles
@mixin reveal-bg( $include-z-index-value: true ) {
  position: fixed;
  // position: absolute; // allows modal background to extend beyond window position
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: $reveal-overlay-bg;
  z-index: if( $include-z-index-value, $z-index-base - 1, auto );
  display: none;
  #{$default-float}: 0;
}

// We use this mixin to create the structure of a reveal modal
//
// $base-style - Provides reveal base styles, can be set to false to override. Default: true, Options: false
// $width - Sets reveal width Default: $reveal-width || 80%
//
@mixin reveal-modal-base( $base-style: true, $width:$reveal-width, $max-width:$reveal-max-width) {
  @if $base-style {
    visibility: hidden;
    display: none;
    position: absolute;
    z-index: $z-index-base;
    width: 100%;
    top:0;
    #{$default-float}: 0;

    @media #{$small-only} {
      min-height:100vh;
    }

    // Make sure rows don't have a min-width on them
    .column, .columns { min-width: 0; }

    & > :last-child { margin-bottom: 0; }
  }

  @if $width {
    @media #{$medium-up} {
      width: $width;
      max-width: $max-width;
      left: 0;
      right: 0;
      margin: 0 auto;
    }
  }
}

// We use this to style the reveal modal defaults
//
// $bg - Sets background color of reveal modal. Default: $reveal-background || #fff
// $padding - Padding to apply to reveal modal. Default: $reveal-padding.
// $border - Choose whether reveal uses a border. Default: true, Options: false
// $border-style - Set reveal border style. Default: $reveal-border-style || solid
// $border-width - Width of border (i.e. 1px). Default: $reveal-border-width.
// $border-color - Color of border. Default: $reveal-border-color.
// $box-shadow - Choose whether or not to include the default box-shadow. Default: true, Options: false
// $radius - If true, set to modal radius which is $global-radius || explicitly set radius amount in px (ex. $radius:10px). Default: false
// $top-offset - Default: $reveal-position-top || 50px
@mixin reveal-modal-style(
  $bg: false,
  $padding: false,
  $border: $reveal-border,
  $box-shadow: false,
  $radius: false,
  $top-offset: false) {

  @if hasvalue($bg) {
    background-color: $bg;
  }

  @if hasvalue($padding) {
    padding: $padding;
  }

  @if hasvalue($border) {
    border: $border-style $border-width $border-color;
  }

  @if $box-shadow {
    box-shadow: $reveal-shadow;
  }

  @if hasvalue($radius) {
    border-radius: $radius;
  }

  @if $top-offset {
    @media #{$medium-up} {
      top: $top-offset;
    }
  }
}

@mixin foundation-reveal {
  // Reveal Modals
  .reveal-modal-bg {
    @include reveal-bg;
  }

  .reveal {
    @include reveal-modal-base;
    @include reveal-modal-style(
      $bg:$reveal-background,
      $padding:$reveal-padding * 1.5,
      $border:true,
      $box-shadow:true,
      $radius:false,
      $top-offset:$reveal-position-top
    );

    &.collapse { @include reveal-modal-style($padding: 0); }

    &.tiny     { @include reveal-modal-base(false, 30%); }
    &.small    { @include reveal-modal-base(false, 40%); }
    &.medium   { @include reveal-modal-base(false, 60%); }
    &.large    { @include reveal-modal-base(false, 70%); }
    &.xlarge   { @include reveal-modal-base(false, 95%); }

    &.full {
      @include reveal-modal-base(false, 100%);
      top:0;
      left:0;
      height:100%;
      height: 100vh;
      min-height:100vh;
      max-width: none !important;
      margin-left: 0 !important;
    }
    
    // Modals pushed to back
    &.toback {
      z-index: $z-index-base - 2;
    }
  }
}
