// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

/// Default background color of a modal.
/// @type Color
$reveal-background: #fff !default;

/// Default width of a modal, with no class applied.
/// @type Number
$reveal-width: 80% !default;

/// Default maximum width of a modal.
/// @type Number
$reveal-max-width: $grid-row-width !default;

/// Offset from the top of the window when a modal is added.
/// @type Number
$reveal-offset: rem-calc(100) !default;

/// Default padding inside a modal.
/// @type Number
$reveal-padding: $global-padding !default;

/// Default border around a modal.
/// @type Number
$reveal-border: 1px solid #ccc !default;

/// Default box shadow under a modal.
/// @type Number
$reveal-shadow: 0 0 10px rgba(#000, 0.4) !default;

/// z-index for modals. The overlay uses this value, while the modal itself uses this value plus one.
/// @type Number
$reveal-zindex: 1005;

/// Background color of modal overlays.
/// @type Color
$reveal-overlay-background: rgba(#000, 0.45) !default;

/// Adds styles for a modal overlay.
/// @param {Color} $background [$reveal-overlay-background] - Background color of the overlay.
@mixin reveal-overlay(
  $background: $reveal-overlay-background
) {
  display: none;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: $reveal-zindex;
  background: $background;
}

/// Adds base styles for a modal.
@mixin reveal-modal-base {
  display: none;
  position: absolute;
  top: 0;
  #{$default-float}: 0;
  z-index: $reveal-zindex + 1;
  width: 100%;
  min-height: 100vh;
  border: $reveal-border;

  @include breakpoint(medium) {
    min-height: 0;
  }

  // Make sure rows don't have a min-width on them
  .column,
  .columns {
    min-width: 0;
  }

  // Strip margins from the last item in the modal
  > :last-child {
    margin-bottom: 0;
  }
}

/// Adjusts the width of a modal.
/// @param {Number} $width - Width of the modal. Generally a percentage.
/// @param {Number} $max-width [$reveal-max-width] - Maximum width of the modal.
@mixin reveal-modal-width(
  $width,
  $max-width: $reveal-max-width
) {
  @include breakpoint(medium) {
    left: auto;
    right: auto;
    width: $width;
    max-width: $max-width;
    margin: 0 auto;
  }
}

/// Creates a full-screen modal, which stretches the full width and height of the window.
@mixin reveal-modal-fullscreen {
  @include reveal-modal-width(100%);
  top: 0;
  left: 0;
  height: 100%;
  height: 100vh;
  min-height: 100vh;
  max-width: none;
  margin-left: 0;
}

@mixin foundation-reveal {
  // Overlay
  .reveal-overlay {
    @include reveal-overlay;
  }

  // Modal container
  .reveal {
    @include reveal-modal-base;

    // Remove padding
    &.collapse {
      padding: 0;
    }

    // Sizing classes
    &.tiny     { @include reveal-modal-width(30%); }
    &.small    { @include reveal-modal-width(40%); }
    &.medium   { @include reveal-modal-width(60%); }
    &.large    { @include reveal-modal-width(70%); }
    &.xlarge   { @include reveal-modal-width(95%); }

    // Full-screen mode
    &.full {
      @include reveal-modal-fullscreen;
    }
    
    // Modals pushed to back
    &.toback {
      z-index: $reveal-zindex - 2;
    }
  }
}
