// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

///
/// @variables
///
/// $include-html-callout-classes: $include-html-classes !default;

$callout-background-fade: 74% !default;
$callout-border-darken: -11% !default;

/// Defualt background color.
/// @type Color
$callout-background: #fff !default;

/// Defualt border style.
/// @type {Color|List}
$callout-border: 1px solid scale-color($callout-background, $lightness: -15%) !default;

/// Default bottom margin for callouts.
/// @type Number
$callout-margin:0 0 1rem 0 !default;

/// Default inner padding for callouts.
/// @type Number
$callout-padding: 1.4rem !default;

/// Default font color for callouts.
/// @type Color
$callout-font-color: $body-font-color !default;

/// Default alternate font color for callouts.
/// @type Color
$callout-font-color-alt: $body-bg !default;

/// Defualt adjustment for headings when detecting lightness.
/// @type Boolean
$callout-header-adjust: true !default;

/// Default color for callout links.
/// @type Color
$callout-callout-link-color: $primary-color !default;

/// Default color for callout links on hover.
/// @type Color
$callout-callout-link-color-hover: scale-color($callout-callout-link-color, $lightness: -14%) !default;

///
/// @mixins
///
/// Mixin to create callouts.
/// $background - Sets the callout background color. Default: $callout-background || scale-color($body-background, $lightness: -5%) !default
/// $padding    - Sets the callout padding amount. Default: $callout-padding || 1.4rem
/// $adjust     - Sets the font color based on the darkness of the background. It also resets header line-heights for callouts. Default: $callout-header-adjust || true
@mixin callout-layout(
  $padding: $callout-padding,
  $margin: $callout-margin
  ) {
  
  margin: $callout-margin;
  padding: $padding;

  // Respect the padding, fool.
  > :first-child { margin-top: 0; }
  > :last-child { margin-bottom: 0; }

  // Resets header line-heights for callouts
  h1, h2, h3, h4, h5, h6 {
    line-height: 1; margin: $callout-margin / 2;
    &.subheader { line-height: 1.4; }
  }
}

@mixin callout-style(
  $background: $callout-background, 
  $border: $callout-border
  ) {

  $background-lightness: lightness($background);
  border: $border;   
  background: $background;

  @if $background-lightness >= 30% { color: $callout-font-color; }
  @else { color: $callout-font-color-alt; }

  // Adjusts the font color based on the darkness of the background.
  @if $background-lightness >= 60% {
    h1, h2, h3, h4, h5, h6, p, li, dl { color: $callout-font-color; }
  }
  @else {
    h1, h2, h3, h4, h5, h6, p, li, dl { color: $callout-font-color-alt; }
  }

}

.callout { 
  @include callout-layout;
  @include callout-style;
  @each $name, $color in $foundation-colors{
    &.#{$name} {
      @include callout-style( $background: scale-color( $color, $lightness: $callout-background-fade ), $border: 1px solid scale-color( $color, $lightness: $callout-border-darken ));
      a {
        color: scale-color( $color, $lightness: -10% );
        &:hover {
          color: scale-color( $color, $lightness: -30% );
        }
      }
    }
  }
}

